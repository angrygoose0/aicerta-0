{% extends 'main/base.html' %}
{% load static %}


{% block title %}Document{% endblock %}


{% block content %}
    <div class="container position-relative">
        <!-- Eye Icon Button at the top right -->
        <a href="/app/{{doc.id}}/preview" class="btn btn-icon position-absolute top-0 end-0 m-2" title="View">
            <i class="fas fa-eye"></i>
        </a>
        <button type="button" class="btn btn-icon position-absolute top-0 m-2" style="right: 2.5rem;" data-bs-toggle="modal" data-bs-target="#OCRModal">
            <i class="fas fa-upload"></i>
        </button>
        
        
        


        
        <div class='exam'>
            <div class="py-3">
                <h1>{{doc.name}}</h1>
                <small><b>Standard: {{doc.exam.standard}}</b></small> 
                <br>
                <small><b>Year: {{doc.exam.year}}</b></small>
            </div>
            
            {% include "main/partials/forms.html" %}

            <div>
                <a class="btn btn-outline-success" href="{% url 'prepare_mark' doc.id %}" role="button">Mark</a>
            </div>
        </div>
    </div>

    <div class="modal fade" id="latexModal" tabindex="-1" aria-labelledby="latexModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="latexModalLabel">Insert LaTex</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body">
                    
                    <div class="mathquill-container py-2">
                        <div class="btn-toolbar mb-2 " role="toolbar" aria-label="Toolbar with button groups">
                            <!-- Arithmetic & Basic Algebra Group -->
                            <div class="btn-group me-2" role="group" aria-label="Arithmetic">
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="+">+</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="-">-</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\times">\(\times\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\div">\(\div\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\pm">\(\pm\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\mp">\(\mp\)</button>
                            </div>
                        
                            <!-- Relations & Equivalents Group -->
                            <div class="btn-group me-2" role="group" aria-label="Relations">
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="=">=</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\neq">\(\neq\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\approx">\(\approx\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\equiv">\(\equiv\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="<"><</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex=">">></button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\leq">\(\leq\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\geq">\(\geq\)</button>
                            </div>
                        
                            <!-- Calculus Group -->
                            <div class="btn-group me-2" role="group" aria-label="Calculus">
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\int">\(\int\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\partial">\(\partial\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\lim_{x \to a}">\(\lim\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\sum">\(\sum\)</button>
                            </div>
                        
                            <!-- Greek Letters Group (only a few for the sake of brevity) -->
                            <div class="btn-group me-2" role="group" aria-label="Greek Letters">
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\alpha">\(\alpha\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\beta">\(\beta\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\gamma">\(\gamma\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\delta">\(\delta\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\lambda">\(\lambda\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\Omega">\(\Omega\)</button>
                            </div>
                        
                            <!-- Miscellaneous Group -->
                            <div class="btn-group" role="group" aria-label="Miscellaneous">
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\infty">\(\infty\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\sqrt{}">\(\sqrt{}\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\angle">\(\angle\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\therefore">\(\therefore\)</button>
                                <button type="button" class="btn btn-sm btn-light math-button" data-latex="\because">\(\because\)</button>
                            </div>
                        </div>
                        <p><span class="mathquill-input"></span></p>
                        <button type="button" class="btn btn-outline-success add-mathquill-btn">+</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-success" id="insertLatexBtn">Insert</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade modal-lg" id="OCRModal" tabindex="-1" aria-labelledby="OCRModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="OCRModalLabel">OCR</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                    <div class="row">
                        {% for file in files %}
                            <div class="col-2">
                                <div class="card box-shadow card-hoverable mb-2">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ file.name|truncatechars:15}}</h5>
                                        <p class="card-text">{{file.file|truncatechars:15}}</p>
                                        <!-- You can add more details of the file here -->
                                    </div>
                                </div>
                            </div>
                        {% endfor %}

                        
                        <div class="col-2">
                            <a href="/app/{{doc.id}}/upload" class="card mb-2" style="text-decoration: none;">
                                <div class="card-body d-flex justify-content-center align-items-center" style="height: 100%;">
                                    <span style="font-size: 3rem; color: #376d4d;">+</span>
                                </div>
                            </a>
                        </div>

                    <div>
                </div>
                


                
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-success">Close or Save or whatever action you need</button>
                </div>
            </div>
        </div>
    </div>
    



{% endblock %}

{% block scripts %}
    <script src="{% static 'js/index.js' %}"></script>

{% endblock %}
